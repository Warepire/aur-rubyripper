From 46823fdf0c66725cb6d7f2332a3df03f9d04640b Mon Sep 17 00:00:00 2001
From: Warepire <Warepire@users.noreply.github.com>
Date: Thu, 12 Apr 2018 16:51:15 +0200
Subject: [PATCH] configure: Make update_mo depend on LANG_SUPPORT

Resolves:
Could not import gettext; skip language support...
Traceback (most recent call last):
	3: from configure:124:in `<main>'
	2: from configure:124:in `each'
	1: from configure:138:in `block in <main>'
configure:109:in `update_mo': uninitialized constant GetText::Tools::Task (NameError)

Which appears if ruby-gettext (or some of its deps) are not installed.

Upstream-Status: Submitted [ https://github.com/bleskodev/rubyripper/pull/612 ]
---
 configure | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

diff --git a/configure b/configure
index 6056c3f..1282a55 100755
--- a/configure
+++ b/configure
@@ -106,14 +106,16 @@ def update_po
 end
 
 def update_mo
-  updateMoTask = GetText::Tools::Task.define do |task|
-    task.domain = 'rubyripper'
-    task.files = Dir.glob("lib/**/*.rb") + Dir.glob("bin/*")
-    task.package_name = 'Rubyripper'
-    task.package_version = '#{$rr_version}'
-    task.enable_po = false
+  if ($LANG_SUPPORT.size != 0)
+    updateMoTask = GetText::Tools::Task.define do |task|
+      task.domain = 'rubyripper'
+      task.files = Dir.glob("lib/**/*.rb") + Dir.glob("bin/*")
+      task.package_name = 'Rubyripper'
+      task.package_version = '#{$rr_version}'
+      task.enable_po = false
+    end
+    updateMoTask.invoke
   end
-  updateMoTask.invoke
 end
 
 def check_deps
-- 
2.16.2

